# FAQ
### Q：通过域名访问慢怎么办？
#### A：通过自助平台的【网络质量查询】，输入域名，查看是否解析到负载均衡上面，若已经解析到负载均衡，请依次将域名在本地绑定到负载均衡后面的服务器进行测试。如果测试都没有问题，请将测试方法和测试结果发送到管理员邮箱

### Q：通过域名访问发生跳转，怎么办？
#### A：目前发生重定向跳转主页的现象，基本是由后端服务问题导致，当发生重定向跳转时，请确认重定向链接里是否包含lb=1参数，来确定是否是由负载均衡层返回的错误码：
      a. 如果不包含，即不是负载均衡返回的错误，请检查后端服务！
      b. 如果包含，目前，负载均衡层针对以下几种情况，会返回重定向跳转到首面：
         • 后端服务器健康检查失败
         • 无服务器可用
         • 连接后端服务重试2次都失败	http://www.jd.com/lb=1&err=3
         • 后端服务在接收到请求后，没有响应的情况下异常断开连接	http://www.jd.com/lb=1&err=2
         • 后端服务响应超时（默认超时时间：60秒）	http://www.jd.com/lb=1&err=4

### Q：用户反馈访问域名（或负载均衡）有问题，而绑定后端服务器测试没问题？
#### A：
       a. 让业务方提供一个url，测测是不是经过负载均衡访问时有问题
       b. 经过负载均衡访问时，跳转到了，我们设定的错误页（haproxy.conf） 
             这种情况需要：
            • 检查负载均衡上有没有这个域名的配置 （没这个域名的acl，也没有default_backend）
            • 后端超时时间设置是不是太短（之前是默认15s）等
       c. 如果是跳转到了首页 ，这种多数是后端nginx（nginx标识：Server: JDWS ）没有配置对应域名导致的，需检查后端nginx配置。

### Q：服务器负载不均怎么办？
#### A：
       a. 分布式负载均衡策略默认是采取加权轮循的算法。
       b. 导致负载不均的原因：一般是开启了会话保持或长连接。
       c. 如果采用的是默认策略，且机器权重（weight）分配合理，请分析访问日志，检查每台服务器在一分钟内的的请求数是否相近:
          • 如果相近，说明负载均衡请求分发没有问题;
          • 如果相差很大，请将访问日志分析结果发邮件到管理员邮箱，确认负载均衡策略。
### Q：域名共用负载均衡会不会有问题？
#### A：目前，确认域名是否可以共用负载均衡，只能通过域名认领的方式来确认，如果认领成功，即表明该域名可以和其他域名共用。

### Q：分布式接入负载均衡有没有探活的功能？
#### A：负载均衡服务默认对后端服务进行端口探活，周期是30秒。

### Q：需要负载层开启https配置么?
#### A：默认已经开启

### Q：可以在负载层上强制开启http转https么?
#### A：负载层只调度,不涉及业务逻辑. 可以在后端nginx配置强制https访问 

